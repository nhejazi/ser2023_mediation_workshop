<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Types of path-specific causal mediation effects | Modern Causal Mediation Analysis</title>
  <meta name="description" content="Open source, reproducible teaching materials accompanying half or full-day conference workshops on causal mediation analysis." />
  <meta name="generator" content="bookdown 0.26.3 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Types of path-specific causal mediation effects | Modern Causal Mediation Analysis" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Open source, reproducible teaching materials accompanying half or full-day conference workshops on causal mediation analysis." />
  <meta name="github-repo" content="nhejazi/causal_mediation_workshops" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Types of path-specific causal mediation effects | Modern Causal Mediation Analysis" />
  
  <meta name="twitter:description" content="Open source, reproducible teaching materials accompanying half or full-day conference workshops on causal mediation analysis." />
  

<meta name="author" content="Iván Díaz, Nima Hejazi, Kara Rudolph" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="mediation.html"/>
<link rel="next" href="estimandirl.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<span class="math inline">
\(\DeclareMathOperator{\expit}{expit}\)
\(\DeclareMathOperator{\logit}{logit}\)
\(\DeclareMathOperator*{\argmin}{\arg\!\min}\)
\(\newcommand{\indep}{\perp\!\!\!\perp}\)
\(\newcommand{\coloneqq}{\mathrel{=}}\)
\(\newcommand{\R}{\mathbb{R}}\)
\(\newcommand{\E}{\mathbb{E}}\)
\(\newcommand{\M}{\mathcal{M}}\)
\(\renewcommand{\P}{\mathbb{P}}\)
\(\newcommand{\I}{\mathbb{I}}\)
\(\newcommand{\1}{\mathbbm{1}}\)
</span>

<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
      // R show code
      $('div.r-code-collapse').each(function() {
        $(this).collapse('show');
      });
      // Python show code
      $('div.py-code-collapse').each(function() {
        $(this).collapse('show');
      }); 
      // Bash show code
      $('div.sh-code-collapse').each(function() {
        $(this).collapse('show');
      }); 
      
  });
  $("#rmd-hide-all-code").click(function() {
      // close the dropdown menu when an option is clicked
      $("#allCodeButton").dropdown("toggle");
      // Hide R code
      $('div.r-code-collapse').each(function() {
        $(this).collapse('hide');
      });
      // Hide Python code
      $('div.py-code-collapse').each(function() {
        $(this).collapse('hide');
      });
      // Hide Bash code
      $('div.sh-code-collapse').each(function() {
        $(this).collapse('hide');
      });
  });


  // index for unique code element ids
  var r_currentIndex  = 1;   // for R code
  var py_currentIndex = 1;   // for Python code
  var sh_currentIndex  = 1;   // for shell code

  // select Python chunks
  var pyCodeBlocks = $('pre.python');
  pyCodeBlocks.each(function() {
    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse py-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'pycode-643E0F36' + py_currentIndex++;
    div.attr('id', id);
    // "this" refers the code chunk
    $(this).before(div);
    $(this).detach().appendTo(div);
    $(this).css('background-color','#ebfaeb');  // change color of chunk background
    
    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide Python code' : 'Python code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);    
        
    // change the background color of the button
    showCodeButton.css('background-color','#009900');
        
    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');
    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);
    div.before(buttonRow);    
    
    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Python code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide Python code');
    });  
   });
  
  

  // select Bash shell chunks
  var shCodeBlocks = $('pre.bash');
  shCodeBlocks.each(function() {
    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse sh-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'shcode-643E0F36' + sh_currentIndex++;
    div.attr('id', id);
    // "this" refers the code chunk
    $(this).before(div);
    $(this).detach().appendTo(div);
    $(this).css('background-color','#A0A0A0');  // change color of chunk background
    
    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide Bash code' : 'Bash code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);    
        
    // change the background color of the button
    showCodeButton.css('background-color','#cc7a00');
        
    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');
    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);
    div.before(buttonRow);    
    
    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Bash code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide Bash code');
    });  
   });  


  // select all R code blocks
  // var rCodeBlocks = $('pre.sourceCode, pre.r, pre.bash, pre.sql, pre.cpp, pre.stan');
  // adding pre.sourceCode confuses the Python button
  var rCodeBlocks = $('pre.r, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {
    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + r_currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);
    $(this).css('background-color','#e6faff'); // change color of chunk background

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide R code' : 'R code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);
    
    // change the background color of the button        
    showCodeButton.css('background-color','#0000ff');
    
    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');
    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);
    div.before(buttonRow);

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('R code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide R code');
    });
  });

}
</script>
<script>
/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.7'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
</script>
<style type="text/css">
.code-folding-btn {
  margin-bottom: 4px;
}

.row { display: flex; }
.collapse { display: none; }
.in { display:block }
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
    box-shadow: 0 6px 12px rgba(0,0,0,.175);
}

.open > .dropdown-menu {
    display: block;
    color: #ffffff;
    background-color: #ffffff;
    background-image: none;
    border-color: #92897e;
}

.dropdown-menu > li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: 400;
  line-height: 1.42857143;
  color: #000000;
  white-space: nowrap;
}

.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
}

.dropdown-menu > .active > a,
.dropdown-menu > .active > a:hover,
.dropdown-menu > .active > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
  outline: 0;
}
.dropdown-menu > .disabled > a,
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  color: #aea79f;
}

.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  text-decoration: none;
  cursor: not-allowed;
  background-color: transparent;
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}

.btn {
  display: inline-block;
  margin-bottom: 1;
  font-weight: normal;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  -ms-touch-action: manipulation;
      touch-action: manipulation;
  cursor: pointer;
  background-image: none;
  border: 1px solid transparent;
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1.42857143;
  border-radius: 4px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
.btn:hover,
.btn:focus,
.btn.focus {
  color: #ffffff;
  text-decoration: none;
}
.btn:active,
.btn.active {
  background-image: none;
  outline: 0;
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
  cursor: not-allowed;
  filter: alpha(opacity=65);
  opacity: 0.65;
  box-shadow: none;
}
a.btn.disabled,
fieldset[disabled] a.btn {
  pointer-events: none;
}
.btn-default {
  color: #ffffff;
  background-color: #aea79f; #important
  border-color: #aea79f;
}

.btn-default:focus,
.btn-default.focus {
  color: #ffffff;
  background-color: #978e83;
  border-color: #6f675e;
}

.btn-default:hover {
  color: #ffffff;
  background-color: #978e83;
  border-color: #92897e;
}
.btn-default:active,
.btn-default.active,
.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
  border-radius: 0;
}
.btn-group > .btn:first-child {
  margin-left: 0;
}
.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn:last-child:not(:first-child),
.btn-group > .dropdown-toggle:not(:first-child) {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
  outline: 0;
}
.btn-group > .btn + .dropdown-toggle {
  padding-right: 8px;
  padding-left: 8px;
}
.btn-group > .btn-lg + .dropdown-toggle {
  padding-right: 12px;
  padding-left: 12px;
}
.btn-group.open .dropdown-toggle {
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn-group.open .dropdown-toggle.btn-link {
  box-shadow: none;
}
</style>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  // show code by default. Use "show" === "hide" to hide
  window.initializeCodeFolding("show" === "show");
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
<link rel="stylesheet" href="css/center.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Causal Mediation Analysis</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#about"><i class="fa fa-check"></i><b>0.1</b> About this workshop</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i><b>0.2</b> Tentative schedule</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#instructors"><i class="fa fa-check"></i><b>0.3</b> About the instructors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#iván-díaz"><i class="fa fa-check"></i>Iván Díaz</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#nima-hejazi"><i class="fa fa-check"></i>Nima Hejazi</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#kara-rudolph"><i class="fa fa-check"></i>Kara Rudolph</a></li>
</ul></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#repro"><i class="fa fa-check"></i><b>0.4</b> Reproducibility</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#setup"><i class="fa fa-check"></i><b>0.5</b> Setup instructions</a>
<ul>
<li class="chapter" data-level="0.5.1" data-path="index.html"><a href="index.html#r-and-rstudio"><i class="fa fa-check"></i><b>0.5.1</b> R and RStudio</a></li>
<li class="chapter" data-level="0.5.2" data-path="index.html"><a href="index.html#renv"><i class="fa fa-check"></i><b>0.5.2</b> Virtual Enironment setup with <code>renv</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="mediation.html"><a href="mediation.html"><i class="fa fa-check"></i><b>1</b> Causal mediation analysis intro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="mediation.html"><a href="mediation.html#motivating-study"><i class="fa fa-check"></i><b>1.1</b> Motivating study</a></li>
<li class="chapter" data-level="1.2" data-path="mediation.html"><a href="mediation.html#what-is-causal-mediation-analysis"><i class="fa fa-check"></i><b>1.2</b> What is causal mediation analysis?</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="mediation.html"><a href="mediation.html#why-are-the-causal-methods-that-we-will-discuss-today-important"><i class="fa fa-check"></i><b>1.2.1</b> Why are the causal methods that we will discuss today important?</a></li>
<li class="chapter" data-level="1.2.2" data-path="mediation.html"><a href="mediation.html#r-example"><i class="fa fa-check"></i><b>1.2.2</b> <code>R</code> Example:</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="mediation.html"><a href="mediation.html#causal-mediation-models"><i class="fa fa-check"></i><b>1.3</b> Causal mediation models</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="mediation.html"><a href="mediation.html#no-intermediate-confounders"><i class="fa fa-check"></i><b>1.3.1</b> No intermediate confounders</a></li>
<li class="chapter" data-level="1.3.2" data-path="mediation.html"><a href="mediation.html#intermediate-confounders"><i class="fa fa-check"></i><b>1.3.2</b> Intermediate confounders</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="mediation.html"><a href="mediation.html#counterfactuals"><i class="fa fa-check"></i><b>1.4</b> Counterfactuals</a>
<ul>
<li class="chapter" data-level="" data-path="mediation.html"><a href="mediation.html#we-will-use-the-following-counterfactual-variables"><i class="fa fa-check"></i>We will use the following counterfactual variables:</a></li>
<li class="chapter" data-level="1.4.1" data-path="mediation.html"><a href="mediation.html#how-are-counterfactuals-defined"><i class="fa fa-check"></i><b>1.4.1</b> How are counterfactuals defined?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="estimands.html"><a href="estimands.html"><i class="fa fa-check"></i><b>2</b> Types of path-specific causal mediation effects</a>
<ul>
<li class="chapter" data-level="2.1" data-path="estimands.html"><a href="estimands.html#controlled-direct-effects"><i class="fa fa-check"></i><b>2.1</b> Controlled direct effects</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="estimands.html"><a href="estimands.html#identification-assumptions"><i class="fa fa-check"></i><b>2.1.1</b> Identification assumptions:</a></li>
<li class="chapter" data-level="2.1.2" data-path="estimands.html"><a href="estimands.html#is-this-the-estimand-i-want"><i class="fa fa-check"></i><b>2.1.2</b> Is this the estimand I want?</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="estimands.html"><a href="estimands.html#natural-direct-and-indirect-effects"><i class="fa fa-check"></i><b>2.2</b> Natural direct and indirect effects</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="estimands.html"><a href="estimands.html#identification-assumptions-1"><i class="fa fa-check"></i><b>2.2.1</b> Identification assumptions:</a></li>
<li class="chapter" data-level="2.2.2" data-path="estimands.html"><a href="estimands.html#cross-world-independence-assumption"><i class="fa fa-check"></i><b>2.2.2</b> Cross-world independence assumption</a></li>
<li class="chapter" data-level="2.2.3" data-path="estimands.html"><a href="estimands.html#identification-formula"><i class="fa fa-check"></i><b>2.2.3</b> Identification formula:</a></li>
<li class="chapter" data-level="2.2.4" data-path="estimands.html"><a href="estimands.html#is-this-the-estimand-i-want-1"><i class="fa fa-check"></i><b>2.2.4</b> Is this the estimand I want?</a></li>
<li class="chapter" data-level="2.2.5" data-path="estimands.html"><a href="estimands.html#unidentifiability-of-the-nde-and-nie-in-this-setting"><i class="fa fa-check"></i><b>2.2.5</b> Unidentifiability of the NDE and NIE in this setting</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="estimands.html"><a href="estimands.html#interventional-indirect-effects"><i class="fa fa-check"></i><b>2.3</b> Interventional (in)direct effects</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="estimands.html"><a href="estimands.html#an-alternative-definition-of-the-effects"><i class="fa fa-check"></i><b>2.3.1</b> An alternative definition of the effects:</a></li>
<li class="chapter" data-level="2.3.2" data-path="estimands.html"><a href="estimands.html#identification-assumptions-2"><i class="fa fa-check"></i><b>2.3.2</b> Identification assumptions:</a></li>
<li class="chapter" data-level="2.3.3" data-path="estimands.html"><a href="estimands.html#is-this-the-estimand-i-want-2"><i class="fa fa-check"></i><b>2.3.3</b> Is this the estimand I want?</a></li>
<li class="chapter" data-level="2.3.4" data-path="estimands.html"><a href="estimands.html#but-there-is-an-important-limitation-of-interventional-effects"><i class="fa fa-check"></i><b>2.3.4</b> But, there is an important limitation of interventional effects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="estimands.html"><a href="estimands.html#estimand-summary"><i class="fa fa-check"></i><b>2.4</b> Estimand Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="estimandirl.html"><a href="estimandirl.html"><i class="fa fa-check"></i><b>3</b> How to choose an estimand: Real-world example</a>
<ul>
<li class="chapter" data-level="3.1" data-path="estimandirl.html"><a href="estimandirl.html#comparative-effectiveness-of-two-medications-for-opioid-use-disorder-oud"><i class="fa fa-check"></i><b>3.1</b> Comparative effectiveness of two medications for opioid use disorder (OUD)</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="estimandirl.html"><a href="estimandirl.html#getting-specific-about-the-question"><i class="fa fa-check"></i><b>3.1.1</b> Getting specific about the question</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html"><a href="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html"><i class="fa fa-check"></i><b>4</b> Estimation preliminaries: review of doubly robust estimators for the average treatment effect</a>
<ul>
<li class="chapter" data-level="4.1" data-path="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html"><a href="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html#option-1-g-computation-estimator"><i class="fa fa-check"></i><b>4.1</b> Option 1: G-computation estimator</a></li>
<li class="chapter" data-level="4.2" data-path="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html"><a href="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html#option-2-inverse-probability-weighted-estimator"><i class="fa fa-check"></i><b>4.2</b> Option 2: Inverse probability weighted estimator</a></li>
<li class="chapter" data-level="4.3" data-path="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html"><a href="estimation-preliminaries-review-of-doubly-robust-estimators-for-the-average-treatment-effect.html#option-3-augmented-inverse-probability-weighted-estimator"><i class="fa fa-check"></i><b>4.3</b> Option 3: Augmented inverse probability weighted estimator</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><i class="fa fa-check"></i><b>5</b> Construction of G-computation and weighted estimators for the NDE: The case of the natural direct effect</a>
<ul>
<li class="chapter" data-level="5.1" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#recap-of-definition-and-identification-of-the-natural-direct-effect"><i class="fa fa-check"></i><b>5.1</b> Recap of definition and identification of the natural direct effect</a></li>
<li class="chapter" data-level="5.2" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#from-causal-to-statistical-quantities"><i class="fa fa-check"></i><b>5.2</b> From causal to statistical quantities</a></li>
<li class="chapter" data-level="5.3" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#computing-identification-formulas-if-you-know-the-true-distribution"><i class="fa fa-check"></i><b>5.3</b> Computing identification formulas if you know the true distribution</a></li>
<li class="chapter" data-level="5.4" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#plug-in-a.k.a-g-computation-estimator"><i class="fa fa-check"></i><b>5.4</b> Plug-in (a.k.a g-computation) estimator</a></li>
<li class="chapter" data-level="5.5" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#first-weighted-estimator-akin-to-inverse-probability-weighted"><i class="fa fa-check"></i><b>5.5</b> First weighted estimator (akin to inverse probability weighted)</a></li>
<li class="chapter" data-level="5.6" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#second-weighted-estimator"><i class="fa fa-check"></i><b>5.6</b> Second weighted estimator</a></li>
<li class="chapter" data-level="5.7" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#how-can-g-estimation-and-weighted-estimation-be-implemented-in-practice"><i class="fa fa-check"></i><b>5.7</b> How can g-estimation and weighted estimation be implemented in practice?</a></li>
<li class="chapter" data-level="5.8" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#pros-and-cons-of-g-computation-and-weighting-parametric-models"><i class="fa fa-check"></i><b>5.8</b> Pros and cons of G-computation and weighting parametric models</a></li>
<li class="chapter" data-level="5.9" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#an-example-of-the-bias-of-a-g-computation-estimator-of-the-natural-direct-effect"><i class="fa fa-check"></i><b>5.9</b> An example of the bias of a g-computation estimator of the natural direct effect</a></li>
<li class="chapter" data-level="5.10" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#pros-and-cons-of-g-computation-or-weighting-with-data-adaptive-regression"><i class="fa fa-check"></i><b>5.10</b> Pros and cons of G-computation or weighting with data-adaptive regression</a></li>
<li class="chapter" data-level="5.11" data-path="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html"><a href="construction-of-g-computation-and-weighted-estimators-for-the-nde-the-case-of-the-natural-direct-effect.html#solution-to-these-problems-robust-semiparametric-efficient-estimation"><i class="fa fa-check"></i><b>5.11</b> Solution to these problems: robust semiparametric efficient estimation</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html"><a href="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html"><i class="fa fa-check"></i><b>6</b> Construction of a semiparametric efficient estimator for the NDE (a.k.a. the one-step estimator)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html"><a href="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html#how-to-compute-the-one-step-estimator-akin-to-augmented-ipw"><i class="fa fa-check"></i><b>6.1</b> How to compute the one-step estimator (akin to Augmented IPW)</a></li>
<li class="chapter" data-level="6.2" data-path="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html"><a href="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html#performance-of-the-one-step-estimator-in-a-small-simulation-study"><i class="fa fa-check"></i><b>6.2</b> Performance of the one-step estimator in a small simulation study</a></li>
<li class="chapter" data-level="6.3" data-path="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html"><a href="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html#a-note-about-targeted-minimum-loss-based-estimation-tmle"><i class="fa fa-check"></i><b>6.3</b> A note about targeted minimum loss-based estimation (TMLE)</a></li>
<li class="chapter" data-level="6.4" data-path="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html"><a href="construction-of-a-semiparametric-efficient-estimator-for-the-nde-a.k.a.-the-one-step-estimator.html#a-note-about-cross-fitting"><i class="fa fa-check"></i><b>6.4</b> A note about cross-fitting</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html"><i class="fa fa-check"></i><b>7</b> <code>R</code> packages for estimation of the causal (in)direct effects</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html#medoutcon-natural-and-interventional-indirect-effects"><i class="fa fa-check"></i><b>7.1</b> <code>medoutcon</code>: Natural and interventional (in)direct effects</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html#natural-indirect-effects"><i class="fa fa-check"></i><b>7.1.1</b> Natural (in)direct effects</a></li>
<li class="chapter" data-level="7.1.2" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html#interlude-sl3-for-nuisance-parameter-estimation"><i class="fa fa-check"></i><b>7.1.2</b> Interlude: <code>sl3</code> for nuisance parameter estimation</a></li>
<li class="chapter" data-level="7.1.3" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html#efficient-estimation-of-the-natural-indirect-effects"><i class="fa fa-check"></i><b>7.1.3</b> Efficient estimation of the natural (in)direct effects</a></li>
<li class="chapter" data-level="7.1.4" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html#interventional-indirect-effects-1"><i class="fa fa-check"></i><b>7.1.4</b> Interventional (in)direct effects</a></li>
<li class="chapter" data-level="7.1.5" data-path="r-packages-for-estimation-of-the-causal-indirect-effects.html"><a href="r-packages-for-estimation-of-the-causal-indirect-effects.html#efficient-estimation-of-the-interventional-indirect-effects"><i class="fa fa-check"></i><b>7.1.5</b> Efficient estimation of the interventional (in)direct effects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="appendix-additional-topics-of-interest.html"><a href="appendix-additional-topics-of-interest.html"><i class="fa fa-check"></i><b>8</b> Appendix: Additional topics of interest</a>
<ul>
<li class="chapter" data-level="8.1" data-path="appendix-additional-topics-of-interest.html"><a href="appendix-additional-topics-of-interest.html#mediation-with-time-varying-treatments-mediators-and-covariates"><i class="fa fa-check"></i><b>8.1</b> Mediation with time-varying treatments, mediators, and covariates</a></li>
<li class="chapter" data-level="8.2" data-path="appendix-additional-topics-of-interest.html"><a href="appendix-additional-topics-of-interest.html#mediation-with-monotonicity-of-a-z-relationship"><i class="fa fa-check"></i><b>8.2</b> Mediation with monotonicity of A-Z relationship</a></li>
<li class="chapter" data-level="8.3" data-path="appendix-additional-topics-of-interest.html"><a href="appendix-additional-topics-of-interest.html#mediation-with-instrumental-variables"><i class="fa fa-check"></i><b>8.3</b> Mediation with instrumental variables</a></li>
<li class="chapter" data-level="8.4" data-path="appendix-additional-topics-of-interest.html"><a href="appendix-additional-topics-of-interest.html#mediation-with-separable-effects"><i class="fa fa-check"></i><b>8.4</b> Mediation with separable effects</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="stochastic.html"><a href="stochastic.html"><i class="fa fa-check"></i><b>9</b> Appendix: Stochastic direct and indirect effects</a>
<ul>
<li class="chapter" data-level="9.1" data-path="stochastic.html"><a href="stochastic.html#definition-of-the-effects"><i class="fa fa-check"></i><b>9.1</b> Definition of the effects</a></li>
<li class="chapter" data-level="9.2" data-path="stochastic.html"><a href="stochastic.html#motivation-for-stochastic-interventions"><i class="fa fa-check"></i><b>9.2</b> Motivation for stochastic interventions</a></li>
<li class="chapter" data-level="9.3" data-path="stochastic.html"><a href="stochastic.html#definition-of-stochastic-effects"><i class="fa fa-check"></i><b>9.3</b> Definition of stochastic effects</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="stochastic.html"><a href="stochastic.html#ipsi"><i class="fa fa-check"></i><b>9.3.1</b> Example: incremental propensity score interventions (IPSI) <span class="citation">(Kennedy, 2018)</span></a></li>
<li class="chapter" data-level="" data-path="stochastic.html"><a href="stochastic.html#example-modified-treatment-policies-mtp-diaz2020causal"><i class="fa fa-check"></i>Example: modified treatment policies (MTP) <span class="citation">(Dı́az and Hejazi, 2020)</span></a></li>
<li class="chapter" data-level="9.3.2" data-path="stochastic.html"><a href="stochastic.html#mediation-analysis-for-stochastic-interventions"><i class="fa fa-check"></i><b>9.3.2</b> Mediation analysis for stochastic interventions</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="stochastic.html"><a href="stochastic.html#identification-assumptions-3"><i class="fa fa-check"></i><b>9.4</b> Identification assumptions</a></li>
<li class="chapter" data-level="9.5" data-path="stochastic.html"><a href="stochastic.html#what-are-the-odds-of-exposure-under-intervention-vs-real-world"><i class="fa fa-check"></i><b>9.5</b> What are the odds of exposure under intervention vs real world?</a></li>
<li class="chapter" data-level="9.6" data-path="stochastic.html"><a href="stochastic.html#summary"><i class="fa fa-check"></i><b>9.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modern Causal Mediation Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="estimands" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Types of path-specific causal mediation effects<a href="estimands.html#estimands" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li>Controlled direct effects</li>
<li>Natural direct and indirect effects</li>
<li>Interventional direct and indirect effects</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-1"></span>
<img src="02-effects-def_files/figure-html/unnamed-chunk-1-1.png" alt="Directed acyclic graph under *no intermediate confounders* of the mediator-outcome relation affected by treatment" width="80%" />
<p class="caption">
FIGURE 2.1: Directed acyclic graph under <em>no intermediate confounders</em> of the mediator-outcome relation affected by treatment
</p>
</div>
<div id="controlled-direct-effects" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Controlled direct effects<a href="estimands.html#controlled-direct-effects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><span class="math display">\[\psi_{\text{CDE}} = \E(Y_{1,m} - Y_{0,m})\]</span></p>
<p><img src="img/graphic4a3.png" width="50%" style="display: block; margin: auto;" /></p>
<ul>
<li>Set the mediator to a reference value <span class="math inline">\(M=m\)</span> uniformly for everyone in the
population</li>
<li>Compare <span class="math inline">\(A=1\)</span> vs <span class="math inline">\(A=0\)</span> with <span class="math inline">\(M=m\)</span> fixed</li>
</ul>
<div id="identification-assumptions" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Identification assumptions:<a href="estimands.html#identification-assumptions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Confounder assumptions:
<ul>
<li><span class="math inline">\(A \indep Y_{a,m} \mid W\)</span></li>
<li><span class="math inline">\(M \indep Y_{a,m} \mid W, A\)</span></li>
</ul></li>
<li>Positivity assumptions:
<ul>
<li><span class="math inline">\(\P(M = m \mid A=a, W) &gt; 0 \text{  } a.e.\)</span></li>
<li><span class="math inline">\(\P(A=a \mid W) &gt; 0 \text{  } a.e.\)</span></li>
</ul></li>
</ul>
<p>Under the above identification assumptions, the controlled direct effect can be
identified:
<span class="math display">\[ \E(Y_{1,m} - Y_{0,m}) = \E\{\color{ForestGreen}{\E(Y \mid A=1, M=m, W) - \E(Y \mid A=0, M=m, W)}\}\]</span></p>
<ul>
<li>For intuition about this formula in R, let’s continue with a toy example:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="estimands.html#cb4-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fl">1e6</span></span>
<span id="cb4-2"><a href="estimands.html#cb4-2" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb4-3"><a href="estimands.html#cb4-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span>)</span>
<span id="cb4-4"><a href="estimands.html#cb4-4" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, w <span class="sc">+</span> a)</span>
<span id="cb4-5"><a href="estimands.html#cb4-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, w <span class="sc">+</span> a <span class="sc">+</span> m)</span></code></pre></div>
<ul>
<li>First we fit a correct model for the outcome</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="estimands.html#cb5-1" aria-hidden="true" tabindex="-1"></a>lm_y <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> m <span class="sc">+</span> a <span class="sc">+</span> w)</span></code></pre></div>
<ul>
<li>Assume we would like the CDE at <span class="math inline">\(m=0\)</span></li>
<li>Then we generate predictions <span class="math display">\[\color{ForestGreen}{\E(Y \mid A=1, M=m, W)}
\text{ and }\color{ForestGreen}{\E(Y \mid A=0, M=m, W)}:\]</span></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="estimands.html#cb6-1" aria-hidden="true" tabindex="-1"></a>pred_y1 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_y, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">m =</span> <span class="dv">0</span>, <span class="at">w =</span> w))</span>
<span id="cb6-2"><a href="estimands.html#cb6-2" aria-hidden="true" tabindex="-1"></a>pred_y0 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_y, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">0</span>, <span class="at">m =</span> <span class="dv">0</span>, <span class="at">w =</span> w))</span></code></pre></div>
<ul>
<li>Then we compute the difference between the predicted values
<span class="math inline">\(\color{ForestGreen}{\E(Y \mid A=1, M=m, W) - \E(Y \mid A=0, M=m, W)}\)</span>, and
average across values of <span class="math inline">\(W\)</span></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="estimands.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## CDE at m = 0</span></span>
<span id="cb7-2"><a href="estimands.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pred_y1 <span class="sc">-</span> pred_y0)</span>
<span id="cb7-3"><a href="estimands.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.0009</span></span></code></pre></div>
</div>
<div id="is-this-the-estimand-i-want" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Is this the estimand I want?<a href="estimands.html#is-this-the-estimand-i-want" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Makes the most sense if can intervene directly on <span class="math inline">\(M\)</span>
<ul>
<li>And can think of a policy that would set everyone to a single constant
level <span class="math inline">\(m \in \mathcal{M}\)</span>.</li>
<li>Judea Pearl calls this <em>prescriptive</em>.</li>
<li>Can you think of an example?</li>
<li>Air pollution, rescue inhaler dosage, hospital visits</li>
<li>Does not provide a decomposition of the average treatment effect into
direct and indirect effects.</li>
</ul></li>
</ul>
<p><em>What if our research question doesn’t involve intervening directly on the
mediator?</em></p>
<p><em>What if we want to decompose the average treatment effect into its direct and
indirect counterparts?</em></p>
</div>
</div>
<div id="natural-direct-and-indirect-effects" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Natural direct and indirect effects<a href="estimands.html#natural-direct-and-indirect-effects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Still using the same DAG as above,</p>
<ul>
<li>Recall the definition of the nested counterfactual:</li>
</ul>
<p><span class="math display">\[\begin{equation*}
  Y_{1, M_0} = f_Y(W, 1, M_0, U_Y)
\end{equation*}\]</span></p>
<ul>
<li><p>Interpreted as <em>the outcome for an individual in a hypothetical world where
treatment was given but the mediator was held at the value it would have
taken under no treatment</em></p>
<p><img src="img/graphic4a.png" width="50%" style="display: block; margin: auto;" /></p></li>
<li><p>Recall that, because of the definition of counterfactuals
<span class="math display">\[\begin{equation*}
Y_{1, M_1} = Y_1
\end{equation*}\]</span></p></li>
</ul>
<p>Then we can decompose the <em>average treatment effect</em> <span class="math inline">\(E(Y_1-Y_0)\)</span> as follows</p>
<p><span class="math display">\[\begin{equation*}
\E[Y_{1,M_1} - Y_{0,M_0}] = \underbrace{\E[Y_{\color{red}{1},\color{blue}{M_1}} -
    Y_{\color{red}{1},\color{blue}{M_0}}]}_{\text{natural indirect effect}} +
    \underbrace{\E[Y_{\color{blue}{1},\color{red}{M_0}} -
    Y_{\color{blue}{0},\color{red}{M_0}}]}_{\text{natural direct effect}}
\end{equation*}\]</span></p>
<ul>
<li>Natural direct effect (NDE): Varying treatment while keeping the mediator
fixed at the value it would have taken under no treatment</li>
<li>Natural indirect effect (NIE): Varying the mediator from the value it would
have taken under treatment to the value it would have taken under control,
while keeping treatment fixed</li>
</ul>
<div id="identification-assumptions-1" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Identification assumptions:<a href="estimands.html#identification-assumptions-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><span class="math inline">\(A \indep Y_{a,m} \mid W\)</span></li>
<li><span class="math inline">\(M \indep Y_{a,m} \mid W, A\)</span></li>
<li><span class="math inline">\(A \indep M_a \mid W\)</span></li>
<li><span class="math inline">\(M_0 \indep Y_{1,m} \mid W\)</span></li>
<li>and positivity assumptions</li>
</ul>
</div>
<div id="cross-world-independence-assumption" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Cross-world independence assumption<a href="estimands.html#cross-world-independence-assumption" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What does <span class="math inline">\(M_0 \indep Y_{1,m} \mid W\)</span> mean?</p>
<ul>
<li>Conditional on <span class="math inline">\(W\)</span>, knowledge of the mediator value in the absence of
treatment, <span class="math inline">\(M_0\)</span>,
provides no information about the outcome under treatment, <span class="math inline">\(Y_{1,m}\)</span>.</li>
<li>Can you think of a data-generating mechanism that would violate this
assumption?</li>
<li>Example: in a randomized study, whenever we believe that treatment assignment
works through adherence (i.e., almost
always), we are violating this assumption (more on this later).</li>
<li>Cross-world assumptions are problematic for other reasons, including:
<ul>
<li>You can never design a randomized study where the assumption holds by
design.</li>
</ul></li>
</ul>
<p><strong>If the cross-world assumption holds, can write the NDE as a weighted average
of controlled direct effects at each level of <span class="math inline">\(M=m\)</span>.</strong></p>
<p><span class="math display">\[\E \sum_m \{\E(Y_{1,m} \mid W) - \E(Y_{0,m} \mid W)\} \P(M_{0}=m
\mid W)\]</span></p>
<ul>
<li>If CDE(<span class="math inline">\(m\)</span>) is constant across <span class="math inline">\(m\)</span>, then CDE = NDE.</li>
</ul>
</div>
<div id="identification-formula" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Identification formula:<a href="estimands.html#identification-formula" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Under the above identification assumptions, the natural direct effect can be
identified:
<span class="math display">\[\begin{equation*}
\E(Y_{1,M_0} - Y_{0,M_0}) =
\E[\color{Goldenrod}{\E\{}\color{ForestGreen}{\E(Y \mid A=1, M, W) -
\E(Y \mid A=0, M, W)}\color{Goldenrod}{\mid A=0,W\}}]
\end{equation*}\]</span></p></li>
<li><p>The natural indirect effect can be identified similarly.</p></li>
<li><p>Let’s dissect this formula in <code>R</code>:</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="estimands.html#cb8-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fl">1e6</span></span>
<span id="cb8-2"><a href="estimands.html#cb8-2" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb8-3"><a href="estimands.html#cb8-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span>)</span>
<span id="cb8-4"><a href="estimands.html#cb8-4" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, w <span class="sc">+</span> a)</span>
<span id="cb8-5"><a href="estimands.html#cb8-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, w <span class="sc">+</span> a <span class="sc">+</span> m)</span></code></pre></div>
<ul>
<li>First we fit a correct model for the outcome</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="estimands.html#cb9-1" aria-hidden="true" tabindex="-1"></a>lm_y <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> m <span class="sc">+</span> a <span class="sc">+</span> w)</span></code></pre></div>
<ul>
<li>Then we generate predictions <span class="math display">\[\color{ForestGreen}{\E(Y \mid A=1, M, W)}
\text{ and }\color{ForestGreen}{\E(Y \mid A=0, M, W)}\]</span> with <span class="math inline">\(A\)</span> fixed but
letting <span class="math inline">\(M\)</span> and <span class="math inline">\(W\)</span> take their observed values</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="estimands.html#cb10-1" aria-hidden="true" tabindex="-1"></a>pred_y1 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_y, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">m =</span> m, <span class="at">w =</span> w))</span>
<span id="cb10-2"><a href="estimands.html#cb10-2" aria-hidden="true" tabindex="-1"></a>pred_y0 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_y, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">0</span>, <span class="at">m =</span> m, <span class="at">w =</span> w))</span></code></pre></div>
<ul>
<li>Then we compute the difference between the predicted values
<span class="math display">\[\color{ForestGreen}{\E(Y \mid A=1, M, W) - \E(Y \mid A=0, M, W)},\]</span></li>
<li>and use this difference as a pseudo-outcome in a regression on <span class="math inline">\(A\)</span> and <span class="math inline">\(W\)</span>:
<span class="math display">\[\color{Goldenrod}{\E\{}\color{ForestGreen}{\E(Y \mid A=1, M, W) - \E(Y \mid
A=0, M, W)}\color{Goldenrod}{\mid A=0,W\}}\]</span></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="estimands.html#cb11-1" aria-hidden="true" tabindex="-1"></a>pseudo <span class="ot">&lt;-</span> pred_y1 <span class="sc">-</span> pred_y0</span>
<span id="cb11-2"><a href="estimands.html#cb11-2" aria-hidden="true" tabindex="-1"></a>lm_pseudo <span class="ot">&lt;-</span> <span class="fu">lm</span>(pseudo <span class="sc">~</span> a <span class="sc">+</span> w)</span></code></pre></div>
<ul>
<li>Now we predict the value of this pseudo-outcome under <span class="math inline">\(A=0\)</span>, and average the
result</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="estimands.html#cb12-1" aria-hidden="true" tabindex="-1"></a>pred_pseudo <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_pseudo, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">0</span>, <span class="at">w =</span> w))</span>
<span id="cb12-2"><a href="estimands.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">## NDE:</span></span>
<span id="cb12-3"><a href="estimands.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pred_pseudo)</span>
<span id="cb12-4"><a href="estimands.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.99655</span></span></code></pre></div>
</div>
<div id="is-this-the-estimand-i-want-1" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Is this the estimand I want?<a href="estimands.html#is-this-the-estimand-i-want-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Makes sense to intervene on <span class="math inline">\(A\)</span> but not directly on <span class="math inline">\(M\)</span>.</li>
<li>Want to understand a natural mechanism underlying an association / total
effect. J. Pearl calls this <em>descriptive</em>.</li>
<li>NDE + NIE = total effect (ATE).</li>
<li>Okay with the assumptions.</li>
</ul>
<p><em>What if our data structure involves a post-treatment confounder of the
mediator-outcome relationship (e.g., adherence)?</em></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-12"></span>
<img src="02-effects-def_files/figure-html/unnamed-chunk-12-1.png" alt="Directed acyclic graph under intermediate confounders of the mediator-outcome relation affected by treatment" width="80%" />
<p class="caption">
FIGURE 2.2: Directed acyclic graph under intermediate confounders of the mediator-outcome relation affected by treatment
</p>
</div>
<p><img src="img/ctndag.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="unidentifiability-of-the-nde-and-nie-in-this-setting" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Unidentifiability of the NDE and NIE in this setting<a href="estimands.html#unidentifiability-of-the-nde-and-nie-in-this-setting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>In this example, natural direct and indirect effects are not generally point
identified from observed data <span class="math inline">\(O=(W,A,Z,M,Y)\)</span>.</p></li>
<li><p>The reason for this is that the cross-world counterfactual
assumption
<span class="math display">\[\begin{equation*}
  Y_{1,m}\indep M_0\mid W
\end{equation*}\]</span>
does not hold in the above directed acyclic graph.</p></li>
<li><p>To give intuition, we focus on the counterfactual outcome <span class="math inline">\(Y_{A=1, M_{A=0}}\)</span>.</p>
<ul>
<li>This counterfactual outcome involves two counterfactual worlds
simultaneously: one in which <span class="math inline">\(A=1\)</span> for the first portion of the
counterfactual outcome, and one in which <span class="math inline">\(A=0\)</span> for the nested portion of the
counterfactual outcome.</li>
<li>Setting <span class="math inline">\(A=1\)</span> induces a counterfactual treatment-induced confounder, denoted
<span class="math inline">\(Z_{A=1}\)</span>. Setting <span class="math inline">\(A=0\)</span> induces another counterfactual treatment-induced
confounder, denoted <span class="math inline">\(Z_{A=0}\)</span>.</li>
<li>The two treatment-induced counterfactual confounders, <span class="math inline">\(Z_{A=1}\)</span> and
<span class="math inline">\(Z_{A=0}\)</span> share unmeasured common causes, <span class="math inline">\(U_Z\)</span>, which creates a spurious
association.</li>
<li>Because <span class="math inline">\(Z_{A=1}\)</span> is causally related to <span class="math inline">\(Y_{A=1, M=m}\)</span>, and <span class="math inline">\(Z_{A=0}\)</span> is
also casually related to <span class="math inline">\(M_{A=0}\)</span>, the path through <span class="math inline">\(U_Z\)</span> means that the
backdoor criterion is not met for identification of <span class="math inline">\(Y_{A=1, M_{A=0}}\)</span>,
i.e., <span class="math inline">\(M_{0} \not\!\perp\!\!\!\perp Y_{A=1, m} \mid W\)</span>, where <span class="math inline">\(W\)</span> denotes
baseline covariates.</li>
</ul></li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-14"></span>
<img src="02-effects-def_files/figure-html/unnamed-chunk-14-1.png" alt="Parallel worlds model of the scenario considered." width="80%" />
<p class="caption">
FIGURE 2.3: Parallel worlds model of the scenario considered.
</p>
</div>
<!--
this is what we used to have
- Technically, the reason for this is that an intervention setting $A=1$
  (necessary for the definition of $Y_{1,m}$) induces a counterfactual variable
  $Z_1$.
- Likewise, an intervention setting $A=0$ (necessary for the definition of
  $M_0$) induces a counterfactual $Z_0$.
- The variables $Z_1$ and $Z_0$ are correlated because they share unmeasured
  common causes, $U_Z$.
- The variable $Z_1$ is correlated with $Y_{1,m}$, and the variable $Z_0$ is
  correlated with $M_0$, because they are counterfactual outcomes in the same
  hypothetical worlds.
- To see this in the definition of counterfactual from a causal structural
  model:
\begin{align*}
  Y_{1,m} &= f_Y(W, 1, Z_1, m, U_Y), \text{ and }\\
  M_0 &= f_M(W, 0, Z_0, U_M)\\
\end{align*}
are correlated even after adjusting for $W$ by virtue of $Z_1$ and $Z_0$ being
correlated.
-->
<!--
Intuitively:
- $Z$ is a confounder of the relation $M \rightarrow Y$, which requires
  adjustment
- But $Z$ is on the pathway $A\rightarrow Y$, which precludes adjustment
-->
<p>However:
- We can actually actually identify the NIE/NDE in the above setting if we are
willing to invoke monotonicity between a treatment and one or more binary
treatment-induced confounders <span class="citation">(<a href="#ref-tchetgen2014identification" role="doc-biblioref">Tchetgen Tchetgen and VanderWeele, 2014</a>)</span>.
- Assuming monotonicity is also sometimes referred to as assuming “no
defiers”—in other words, assuming that there are no individuals who would
do the opposite of the encouragement.
- Monotonicity may seem like a restrictive assumption, but may be reasonable in
some common scenarios (e.g., in trials where the intervention is randomized
treatment assignment and the treatment-induced confounder is whether or not
treatment was actually taken–in this setting, we may feel comfortable
assuming that there are no “defiers”, frequently assumed when using IVs to
identify causal effects)</p>
<p>Note: CDEs are still identified in this setting. They can be identified and
estimated similarly to a longitudinal data sructure with a two-time-point
intervention.</p>
</div>
</div>
<div id="interventional-indirect-effects" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Interventional (in)direct effects<a href="estimands.html#interventional-indirect-effects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Let <span class="math inline">\(G_a\)</span> denote a random draw from the distribution of <span class="math inline">\(M_a \mid W\)</span></li>
<li>Define the counterfactual <span class="math inline">\(Y_{1,G_0}\)</span> as the counterfactual
variable in a hypothetical world where <span class="math inline">\(A\)</span> is set <span class="math inline">\(A=1\)</span> and <span class="math inline">\(M\)</span> is
set to <span class="math inline">\(M=G_0\)</span> with probability one.</li>
</ul>
<p><img src="img/graphic4b.png" width="50%" style="display: block; margin: auto;" /></p>
<ul>
<li>Define <span class="math inline">\(Y_{0,G_0}\)</span> and <span class="math inline">\(Y_{1,G_1}\)</span> similarly</li>
<li>Then we can define:
<span class="math display">\[\begin{equation*}
\E[Y_{1,G_1} - Y_{0,G_0}] = \underbrace{\E[Y_{\color{red}{1},\color{blue}{G_1}} -
    Y_{\color{red}{1},\color{blue}{G_0}}]}_{\text{interventional indirect effect}} +
    \underbrace{\E[Y_{\color{blue}{1},\color{red}{G_0}} -
    Y_{\color{blue}{0},\color{red}{G_0}}]}_{\text{interventional direct effect}}
\end{equation*}\]</span></li>
<li>Note that <span class="math inline">\(\E[Y_{1,G_1} - Y_{0,G_0}]\)</span> is still a <em>total effect</em> of treatment,
even if it is different from the ATE <span class="math inline">\(\E[Y_{1} - Y_{0}]\)</span></li>
<li>We gain in the ability to solve a problem, but lose in terms of interpretation
of the causal effect (cannot decompose the ATE)</li>
</ul>
<div id="an-alternative-definition-of-the-effects" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> An alternative definition of the effects:<a href="estimands.html#an-alternative-definition-of-the-effects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Above we defined <span class="math inline">\(G_a\)</span> as a random draw from the distribution of <span class="math inline">\(M_a \mid W\)</span></li>
<li>What if instead we define <span class="math inline">\(G_a\)</span> as a random draw from the distribution of <span class="math inline">\(M_a \mid (Z_a,W)\)</span></li>
<li>It turns out the indirect effect defined in this way only measures the path
<span class="math inline">\(A\rightarrow M \rightarrow Y\)</span>, and not the path <span class="math inline">\(A\rightarrow Z\rightarrow M \rightarrow Y\)</span></li>
<li>There may be important reasons to choose one over another (e.g., survival
analyses where we want the distribution conditional on <span class="math inline">\(Z\)</span>, instrumental
variable designs where it doesn’t make sense to condition on <span class="math inline">\(Z\)</span>)</li>
</ul>
<!--
 + Marginal PIDE: $\E(Y_{a, g_{M \mid a^{\star}, W}}) -
   \E(Y_{a^{\star}, g_{M \mid a^{\star}, W}})$
 + Marginal PIIE: $\E(Y_{a, g_{M \mid a, W}}) -
   \E(Y_{a, g_{M \mid a^{\star}, W}})$
 + Conditional PIDE: $\E(Y_{a, g_{M \mid Z, a^{\star}, W}}) -
   \E(Y_{a^{\star}, g_{M \mid Z, a^{\star}, W}})$
 + Conditional PIIE: $\E(Y_{a, g_{M \mid Z, a, W}}) -
   \E(Y_{a, g_{M \mid Z, a^{\star}, W}})$
 + Can you think of an example when you would want the conditional versions?
   Marginal versions?
-->
</div>
<div id="identification-assumptions-2" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Identification assumptions:<a href="estimands.html#identification-assumptions-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><span class="math inline">\(A \indep Y_{a,m} \mid W\)</span></li>
<li><span class="math inline">\(M \indep Y_{a,m} \mid W, A, Z\)</span></li>
<li><span class="math inline">\(A \indep M_a \mid W\)</span></li>
<li>and positivity assumptions.</li>
</ul>
<p>Under these assumptions, the population interventional direct and indirect
effect is identified:
<span class="math display">\[\begin{align*}
  \E &amp;(Y_{a, G_{a&#39;}}) = \\
     &amp; \E\left[\color{Purple}{\E\left\{\color{Goldenrod}{\sum_z}
      \color{ForestGreen}{\E(Y \mid A=a, Z=z, M, W)}
      \color{Goldenrod}{\P(Z=z \mid A=a, W)}\mid A=a&#39;, W\right\}}\right]
\end{align*}\]</span></p>
<ul>
<li>Let’s dissect this formula in <code>R</code>:</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="estimands.html#cb13-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fl">1e6</span></span>
<span id="cb13-2"><a href="estimands.html#cb13-2" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb13-3"><a href="estimands.html#cb13-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span>)</span>
<span id="cb13-4"><a href="estimands.html#cb13-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span> <span class="sc">+</span> <span class="fl">0.2</span> <span class="sc">*</span> a)</span>
<span id="cb13-5"><a href="estimands.html#cb13-5" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, w <span class="sc">+</span> a <span class="sc">-</span> z)</span>
<span id="cb13-6"><a href="estimands.html#cb13-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, w <span class="sc">+</span> a <span class="sc">+</span> z <span class="sc">+</span> m)</span></code></pre></div>
<ul>
<li>Let us compute <span class="math inline">\(\E(Y_{1, G_0})\)</span> (so that <span class="math inline">\(a = 1\)</span>, and <span class="math inline">\(a&#39;=0\)</span>).</li>
<li>First, fit a regression model for the outcome, and compute
<span class="math display">\[\color{ForestGreen}{\E(Y \mid A=a, Z=z, M, W)}\]</span> for all values of <span class="math inline">\(z\)</span></li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="estimands.html#cb14-1" aria-hidden="true" tabindex="-1"></a>lm_y <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> m <span class="sc">+</span> a <span class="sc">+</span> z <span class="sc">+</span> w)</span>
<span id="cb14-2"><a href="estimands.html#cb14-2" aria-hidden="true" tabindex="-1"></a>pred_a1z0 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_y, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">m =</span> m, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">z =</span> <span class="dv">0</span>, <span class="at">w =</span> w))</span>
<span id="cb14-3"><a href="estimands.html#cb14-3" aria-hidden="true" tabindex="-1"></a>pred_a1z1 <span class="ot">&lt;-</span> <span class="fu">predict</span>(lm_y, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">m =</span> m, <span class="at">a =</span> <span class="dv">1</span>, <span class="at">z =</span> <span class="dv">1</span>, <span class="at">w =</span> w))</span></code></pre></div>
<ul>
<li>Now we fit the true model for <span class="math inline">\(Z \mid A, W\)</span> and get the conditional
probability that <span class="math inline">\(Z=1\)</span> fixing <span class="math inline">\(A=1\)</span></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="estimands.html#cb15-1" aria-hidden="true" tabindex="-1"></a>prob_z <span class="ot">&lt;-</span> <span class="fu">lm</span>(z <span class="sc">~</span> a)</span>
<span id="cb15-2"><a href="estimands.html#cb15-2" aria-hidden="true" tabindex="-1"></a>pred_z <span class="ot">&lt;-</span> <span class="fu">predict</span>(prob_z, <span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>))</span></code></pre></div>
<ul>
<li>Now we compute the following pseudo-outcome:
<span class="math display">\[\color{Goldenrod}{\sum_z}\color{ForestGreen}{\E(Y \mid A=a, Z=z, M, W)}
\color{Goldenrod}{\P(Z=z \mid A=a, w)}\]</span></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="estimands.html#cb16-1" aria-hidden="true" tabindex="-1"></a>pseudo_out <span class="ot">&lt;-</span> pred_a1z0 <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">-</span> pred_z) <span class="sc">+</span> pred_a1z1 <span class="sc">*</span> pred_z</span></code></pre></div>
<ul>
<li>Now we regress this pseudo-outcome on <span class="math inline">\(A,W\)</span>, and compute the predictions
setting <span class="math inline">\(A=0\)</span>, that is, <span class="math display">\[\color{Purple}{\E\left\{\color{Goldenrod}{\sum_z}
\color{ForestGreen}{\E(Y \mid A=a, Z=z, M, W)}
\color{Goldenrod}{\P(Z=z \mid A=a, w)}\mid A=a&#39;, W\right\}}\]</span></li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="estimands.html#cb17-1" aria-hidden="true" tabindex="-1"></a>fit_pseudo <span class="ot">&lt;-</span> <span class="fu">lm</span>(pseudo_out <span class="sc">~</span> a <span class="sc">+</span> w)</span>
<span id="cb17-2"><a href="estimands.html#cb17-2" aria-hidden="true" tabindex="-1"></a>pred_pseudo <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_pseudo, <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">0</span>, <span class="at">w =</span> w))</span></code></pre></div>
<ul>
<li>And finally, just average those predictions!</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="estimands.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Mean(Y(1, G(0)))</span></span>
<span id="cb18-2"><a href="estimands.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pred_pseudo)</span>
<span id="cb18-3"><a href="estimands.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1.1979</span></span></code></pre></div>
<ul>
<li>This was for <span class="math inline">\((a,a&#39;)=(1,0)\)</span>. Can do the same with <span class="math inline">\((a,a&#39;)=(1,1)\)</span>, and
<span class="math inline">\((a,a&#39;)=(0,0)\)</span> to obtain an effect decomposition</li>
</ul>
<p><span class="math display">\[\begin{equation*}
  \E[Y_{1,G_1} - Y_{0,G_0}] = \underbrace{\E[Y_{\color{red}{1},
    \color{blue}{G_1}} -
    Y_{\color{red}{1},
    \color{blue}{G_0}}]}_{\text{interventional indirect effect}} +
    \underbrace{\E[Y_{\color{blue}{1},\color{red}{G_0}} -
    Y_{\color{blue}{0},
    \color{red}{G_0}}]}_{\text{interventional direct effect}}
\end{equation*}\]</span></p>
</div>
<div id="is-this-the-estimand-i-want-2" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Is this the estimand I want?<a href="estimands.html#is-this-the-estimand-i-want-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Makes sense to intervene on <span class="math inline">\(A\)</span> but not directly on <span class="math inline">\(M\)</span>.</li>
<li>Goal is to understand a descriptive type of mediation.</li>
<li>Okay with the assumptions!</li>
</ul>
</div>
<div id="but-there-is-an-important-limitation-of-interventional-effects" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> But, there is an important limitation of interventional effects<a href="estimands.html#but-there-is-an-important-limitation-of-interventional-effects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="citation">Miles (<a href="#ref-miles2022causal" role="doc-biblioref">2022</a>)</span> recently uncovered an important limitation of these effects,
which can be described as follows. The sharp mediational hull hypothesis can be
defined as</p>
<p><span class="math display">\[H_0:Y(a, M(a&#39;)) = Y(a, M(a^\star));\text{ for all }a, a&#39;, a^\star.\]</span></p>
<p>The problem is that interventional effects are not guaranteed to be null when
the sharp mediational hypothesis is true.</p>
<p>This could present a problem in practice if some subgroup of the population has
a relationship between <span class="math inline">\(A\)</span> and <span class="math inline">\(M\)</span>, but not between <span class="math inline">\(M\)</span> and <span class="math inline">\(Y\)</span>. Then, another
distinct subgroup of the population has a relationship between <span class="math inline">\(M\)</span> and <span class="math inline">\(Y\)</span> but
not between <span class="math inline">\(A\)</span> and <span class="math inline">\(M\)</span>. In such a scenario, the interventional indirect effect
would be nonzero, but there would be no one person in the population whose
effect of <span class="math inline">\(A\)</span> on <span class="math inline">\(Y\)</span> would be mediated by <span class="math inline">\(M\)</span>.</p>
<!--
One counterexample involves creating an NPSEM with independent errors,
$W=\emptyset$, and an exogenous binary variable $U_Z$ such that $M(a)
= M(a')$ in the event $U_Z=1$ and $Y(a,m') = Y(a,m)$ in the event
$U_Z=0$ for all $a$, $a'$, and $m$, such that there is no causal
influence of $A$ on $Y$ operating through $M$. It is easy to see that
the randomized interventional indirect effect in this example equals

\[\sum_{z,m} E(Y\mid m, z,a) P(Z=z\mid a)[P(M=m\mid a)-P(M=m\mid
a')],\] 

which is generally not null, and would only be null if $U_Z$
was observed and conditioned upon in all the above quantities.
-->
<p>More details in the original paper.</p>
</div>
</div>
<div id="estimand-summary" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Estimand Summary<a href="estimands.html#estimand-summary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-22"></span>
<img src="img/table1.png" alt="Excerpted from @rudolph2019causal" width="125%" />
<p class="caption">
FIGURE 2.4: Excerpted from <span class="citation">Rudolph et al. (<a href="#ref-rudolph2019causal" role="doc-biblioref">2019</a>)</span>
</p>
</div>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-miles2022causal" class="csl-entry">
Miles, C.H. (2022) <a href="https://arxiv.org/abs/2203.00245">On the causal interpretation of randomized interventional indirect effects</a>. <em>arXiv preprint arXiv:2203.00245</em>.
</div>
<div id="ref-rudolph2019causal" class="csl-entry">
Rudolph, K.E., Goin, D.E., Paksarian, D., Crowder, R., Merikangas, K.R. and Stuart, E.A. (2019) Causal mediation analysis with observational data: Considerations and illustration examining mechanisms linking neighborhood poverty to adolescent substance use. <em>American journal of epidemiology</em>, <strong>188</strong>, 598–608.
</div>
<div id="ref-tchetgen2014identification" class="csl-entry">
Tchetgen Tchetgen, E.J. and VanderWeele, T.J. (2014) On identification of natural direct effects when a confounder of the mediator is directly affected by exposure. <em>Epidemiology</em>, <strong>25</strong>, 282.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mediation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="estimandirl.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nhejazi/causal_mediation_workshops/edit/master/02-effects-def.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
